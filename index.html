<html>
	<head>
		<title>Toastmaster</title>
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"></meta>
		<script type="text/javascript" src="jquery-2.1.4.min.js"></script>
	</head>
	<body>
		<h1>Propose a Toast</h1>
		<input type="text" id="txtToast"/>
		<button id="btnMakeToast">Toast!</button>
		<div>
			<pre><code id="log"></code></pre>
		</div>
		<button id="btnDebug">debug</button>
		<button id="btnClear">clear</button>
		<script type="text/javascript" src="cordova.js"></script>
		<script>
		  $(function() {
		    function log(message) {
		      console.log('LOG | ' + message);
		      $('#log').append(message + '\n');
		    }
		    function debugObj(name, obj) {
		      log('---');
		      log('obj: ' + name);
		      log('type: ' + typeof obj);
		      if(typeof obj === 'undefined' || obj === null) return;
		      try {
		      	log('json: ' + JSON.stringify(obj));
		      } catch(e) { log('Got this when trying to JSONify: ' + e);
		      for(prop in obj)
		        if(obj.hasOwnProperty(prop))
		          log(prop + ' -> ' + obj[prop]);
		    }
		    function debug() {
		    	debugObj('window', window);
		    	debugObj('androidToaster', androidToaster);
		    	debugObj('cordova', cordova);
		    	debugObj('cordova_toast', cordova_toast);
		    }
		    var makeToast = function(toast) {
		      toast = 'A toast: TO ' + toast.toUpperCase() + '!';
		      if(window.androidToaster) {
		        log('using android...');
		        window.androidToaster.toast(toast);
		      } else if(window.cordova) {
		        log('using cordova...');
		        cordova.exec(
			    function() { log('success with ' + arguments.length + ' args'); },
			    function() { log('error with ' + arguments.length + ' args'); },
			    'toast', 'toast', [toast]);
		      } else if(window.cordova_toast) {
		        log('using cordova_toast.js...');
		        cordova.exec(
			    function() { log('success with ' + arguments.length + ' args'); },
			    function() { log('error with ' + arguments.length + ' args'); },
			    'toast', 'toast', [toast]);
		      } else {
		        log('using browser...');
		        alert(toast);
		      }
		    };
		    $('#btnMakeToast').click(function() {
		      makeToast($('#txtToast').val());
		    });
		    $('#btnDebug').click(debug);
		    $('#btnClear').click(function() {
		    	$('#log').text('');
		    });
		  });
		</script>
	</body>
</html>
